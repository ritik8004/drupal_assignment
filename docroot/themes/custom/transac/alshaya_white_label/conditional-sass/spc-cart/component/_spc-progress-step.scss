$cko-steps-inactive-border: #ccc;
$cko-steps-active-border: #000;
$cko-steps-label-txt: #000;
$cko-steps-inactive-bg: #fff;
$cko-steps-active-bg: #000;
$cko-steps-active-txt: #fff;
$cko-steps-inactive-txt: #000;

%steps-border {
  content: "";
  position: absolute;
  #{$left}: 0;
  top: 50%;
  height: rem(1);
  width: 100%;
}

.cko-progress-tracker {
  max-width: rem(1026);
  margin: 0 auto rem(15);

  #checkout-progress {
    width: 90%;
    margin: 0 auto;
    font-size: rem(14);
    position: relative;

    &::before {
      @extend %steps-border;

      background-color: $cko-steps-inactive-border;
      transform: translateY(-50%);
    }

    &::after {
      @extend %steps-border;

      background-color: $cko-steps-active-border;
      transform: scaleX(0) translateY(-50%);
      transform-origin: $left center;
    }

    &.step {
      &-2 {
        &::after {
          transform: scaleX(0.333) translateY(-50%);
        }
      }

      &-3 {
        &::after {
          transform: scaleX(0.666) translateY(-50%);
        }
      }

      &-4 {
        &::after {
          transform: scaleX(1) translateY(-50%);
        }
      }
    }

    .progress-bar {
      width: 100%;
      display: flex;
      height: rem(100);
      justify-content: space-between;
      align-items: center;

      .step {
        z-index: 2;
        position: relative;

        .step-label {
          position: absolute;
          top: calc(100% + 1.125rem);
          white-space: nowrap;
          #{$left}: 50%;
          transform: translateX(-50%) perspective(1000px);
          color: $cko-steps-label-txt;
        }

        span {
          color: $cko-steps-label-txt;
          transition: 0.3s ease;
          display: block;
          transform: translate3d(0, 0, 0) scale(1);
        }

        &.active {
          span {
            color: $cko-steps-active-txt;
          }

          .step-label {
            color: $cko-steps-label-txt;
            font-family: $alshaya-bold;
          }

          &::after {
            border: rem(1) solid $cko-steps-active-border;
            background-color: $cko-steps-active-bg;
          }
        }

        &.valid {
          span {
            color: $cko-steps-active-txt;
            transform: translate3d(0, 0, 0) scale(2);
            font-size: 0;
          }

          .step-label {
            color: $cko-steps-label-txt !important;
            font-size: rem(14);
            top: calc(100% + 1.75rem);
          }

          &::after {
            border: rem(1) solid $cko-steps-active-border;
            content: '';
            background: url('#{$base_theme_img_directory_path}/icons/done-state.svg') no-repeat;
            background-color: $cko-steps-active-bg;
            background-position: 60%;
          }
        }

        &::after {
          content: "";
          position: absolute;
          z-index: -1;
          #{$left}: 50%;
          top: 50%;
          transform: translate(-50%, -50%);
          width: rem(32);
          height: rem(32);
          background-color: $cko-steps-inactive-bg;
          border-radius: 50%;
          border: rem(1) solid $cko-steps-active-border;
        }
      }
    }
  }
}
