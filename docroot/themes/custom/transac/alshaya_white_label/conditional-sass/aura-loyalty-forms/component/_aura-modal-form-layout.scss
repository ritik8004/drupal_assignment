.popup-overlay.aura-modal-form,
.aura-modal-congratulations-overlay {
  .popup-content.aura-modal-form,
  .aura-modal-congratulations-content {
    padding: 0 !important;
    color: $aura-form-otp-text;
    max-width: rem(412);
    background: $aura-form-otp-background !important;
    z-index: 0;

    @include breakpoint($only-mobile) {
      width: 100% !important;
      max-width: 100%;
      height: 100%;
      overflow: hidden;
      border: none !important;
      padding: 0 !important;
    }

    &.link-card-otp-modal-content,
    &.link-old-card-modal-content {
      max-width: rem(412);

      .aura-guest-user-link-card-otp-form {
        .aura-modal-form {
          .aura-modal-form-items {
            padding: rem(24) rem(30) rem(10);

            .aura-form-items-link-card-options {
              margin-top: rem(16);
            }
          }

          .aura-modal-form-actions {
            .aura-otp-submit-description {
              .resend-otp {
                display: inline-block;
              }
            }

            .aura-modal-footer {
              padding: rem(5) 0;
            }
          }
        }
      }

      @include breakpoint($only-mobile) {
        &.link-old-card-modal-content {
          overflow-y: auto !important;
          height: auto !important;
          bottom: 0;
          position: absolute !important;

          .spc-aura-unlink-card-wrapper {
            .spc-aura-unlink-card-form-content {
              padding-bottom: 0;
            }

            .aura-modal-form-actions {
              position: relative;
              background: none;
            }
          }
        }
      }
    }

    &.link-card-otp-modal-content {
      .aura-guest-user-link-card-otp-form {
        .aura-modal-form {
          .aura-modal-form-actions {
            .aura-modal-footer {
              padding: 0;
            }
          }
        }
      }
    }

    .aura-modal-header {
      height: 3.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      font-family: $aura-regular;
      color: $aura-form-modal-title;
      background: $aura-form-modal-section-bg;
      box-shadow: 0 0.125rem 0.625rem 0 rgba(0, 0, 0, 0.1);
      margin-bottom: 0.625rem;

      .spc-checkout-section-title {
        font-family: inherit;
        font-size: inherit;
        margin: 0;
        color: $aura-header-title-1;
      }

      .close {
        position: absolute;
        #{$right}: 0.1875rem;
        cursor: pointer;
        background: none;
        border: none;

        @include icon("close") {
          font-size: 3rem;
          width: 3rem;
          height: 3rem;
          color: $aura-form-modal-title;
        }
      }
    }

    .aura-modal-form,
    .spc-aura-unlink-card-wrapper {
      max-width: rem(412);

      &::after {
        content: "";
        background: $aura-form-modal-section-bg;
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
        z-index: -2;
      }

      .aura-modal-form-items {
        font-family: $aura-regular;
        text-align: $left;
        padding: 1.25rem;
      }

      .aura-modal-form-actions {
        padding-bottom: rem(23);
        border-top: rem(8) solid $spc-cart-delivery-popup-button-shadow;

        .aura-modal-form-submit,
        .aura-modal-form-submit-without-otp,
        .spc-aura-link-card-submit {
          height: rem(50);
          border-radius: 1.75rem;
          background-image: $aura-modal-submit;
          display: flex;
          align-items: center;
          justify-content: center;
          color: $aura-form-modal-section-bg;
          margin: rem(25) rem(30) rem(21);
          cursor: pointer;
          font-family: $aura-bold;
          font-size: 1rem;
          letter-spacing: 0.71px;
        }
      }
    }

    .aura-otp-form,
    .aura-new-user-form,
    .aura-congratulations-modal,
    .aura-guest-user-link-card-otp-form,
    .spc-aura-unlink-card-wrapper {
      .aura-modal-header {
        background: $aura-header-join-now-bg;
        margin-bottom: 0;

        .spc-checkout-section-title {
          font-family: $aura-caption-regular;
        }
      }

      .aura-modal-body {
        max-width: rem(312);
        text-align: center;
        margin: rem(32) auto rem(24);
        font-family: $aura-regular;
        line-height: rem(26);

        .congratulations-text {
          margin-bottom: rem(40);
          color: $aura-header-sign-link;

          @include breakpoint($only-mobile) {
            margin-bottom: rem(24);
          }
        }

        .download-text {
          color: $aura-congratulation-highlight-text;
        }

        .mobile-only {
          display: none;

          @include breakpoint($only-mobile) {
            display: block;

            .app-links {
              display: flex;
              justify-content: center;
              margin-top: rem(20);

              a {
                svg {
                  max-height: rem(49);
                  width: auto;
                }
              }
            }
          }
        }

        @include breakpoint($only-mobile) {
          font-size: rem(14);
          line-height: rem(22);
          max-width: rem(280);
        }
      }

      .aura-modal-form {
        .aura-modal-form-items {
          padding: rem(40) rem(20);
        }

        .linkingoptions-label,
        .otp-sent-to-mobile-label {
          span {
            display: inline-block;
          }
        }

        .otp-sent-to-mobile-label {
          position: relative;
          margin-bottom: rem(61);
          line-height: rem(22);

          @include breakpoint($only-mobile) {
            margin-bottom: rem(44);
          }
        }
      }

      .aura-modal-form-actions {
        .aura-new-user-t-c {
          margin: rem(32);
          padding: 0;
          color: $aura-otp-submit-description;

          a {
            display: inline-block;

            &:hover {
              background-color: transparent;
            }
          }
        }

        .aura-modal-form-submit,
        .aura-modal-form-submit-without-otp,
        .spc-aura-link-card-submit {
          $border: rem(2);

          color: $aura-join-submit-text;
          background: $aura-form-modal-section-bg;
          background-clip: padding-box;
          border: solid $border transparent;
          position: relative;

          @include breakpoint($desktop) {
            width: rem(352);
          }

          &::before {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            z-index: -1;
            margin: -$border;
            border-radius: inherit;
            background: $aura-join-now-submit-bg-src;
          }
        }

        .aura-modal-form-submit-without-otp {
          margin-bottom: rem(21);
        }

        @include breakpoint($only-mobile) {
          position: absolute;
          bottom: 0;
          width: 100%;
          z-index: 1;
        }
      }

      .aura-modal-form-footer,
      .aura-modal-footer {
        text-align: center;

        .already-a-member-link,
        .join-aura {
          text-decoration: underline;
          font-family: $aura-caption-regular;
          font-size: rem(12);
          color: $aura-header-sign-link;
          cursor: pointer;
        }
      }
    }

    .spc-aura-unlink-card-wrapper {
      .aura-modal-body {
        max-width: rem(328);
        margin: rem(34) auto rem(37);

        .description {
          font-size: rem(14);
          line-height: rem(20);
          text-align: $left;
          color: $aura-loyalty-dark-text;
          margin-bottom: rem(26);
        }

        .spc-aura-unlink-card-form-content {
          display: flex;
          align-items: flex-end;
          text-align: $left;

          @include breakpoint($only-mobile) {
            padding-bottom: rem(50);
          }

          .form-items {
            display: flex;
            flex-direction: column;

            label {
              color: $aura-loyalty-activity-txt;
              font-size: rem(12);
              line-height: normal;
              margin-bottom: rem(8);
            }

            input {
              height: rem(34);
              border: 1px solid $aura-spc-textbox-border;
              max-width: rem(262);
              font-size: rem(10);
              padding: rem(12) rem(13) rem(10);
              color: $aura-spc-checkout-text-content;
            }
          }

          .no-link-message {
            height: rem(34);

            a {
              display: inline-block;
              font-size: rem(10);
              color: $aura-loyalty-dark-text;
              padding-#{$left}: rem(22);
            }
          }

          input {
            width: rem(262);
          }
        }
      }

      .aura-modal-form-actions {
        .spc-aura-link-card-submit {
          margin: rem(26) rem(30) rem(21);

          @include breakpoint($only-mobile) {
            margin-#{$left}: rem(21);
            margin-#{$right}: rem(21);
          }
        }

        .aura-modal-footer {
          .join-aura {
            line-height: rem(28);
          }
        }
      }
    }

    .aura-guest-user-link-card-otp-form {
      @include breakpoint($only-mobile) {
        height: 100%;

        .aura-modal-form {
          height: calc(100% - 3.5rem);
        }
      }
    }
  }
}

.aura-modal-congratulations-overlay {
  z-index: 1001 !important;

  .aura-modal-congratulations-content {
    border-radius: rem(10);

    @include breakpoint($only-mobile) {
      width: rem(336) !important;
      height: auto;
      text-transform: none;
    }

    .aura-congratulations-modal {
      .aura-modal-header {
        .spc-checkout-section-title {
          color: $aura-congratulation-highlight-text;
          font-weight: 700;
        }
      }

      .aura-modal-body {
        margin: rem(30) auto rem(24);

        @include breakpoint($tablet) {
          margin: rem(33) auto rem(38);
        }

        .congratulations-text {
          margin-bottom: rem(22);

          @include breakpoint($tablet) {
            margin-bottom: rem(24);
          }
        }

        .mobile-only {
          .app-links {
            a {
              display: inline-flex;
            }
          }
        }
      }
    }
  }
}

.aura-modal-popup-overlay {
  z-index: 1000 !important;

  @include breakpoint($only-tablet) {
    width: 100vw;
    top: rem(-47) !important;
  }

  .aura-modal-popup-content {
    border-radius: rem(10);

    @include breakpoint($only-mobile) {
      width: rem(336) !important;
      height: auto;
    }

    .aura-congratulations-modal {
      .aura-modal-header {
        .spc-checkout-section-title {
          font-family: $aura-bold;
          color: $aura-congratulation-highlight-text;
        }
      }
    }
  }
}

.aura-otp-form,
.aura-new-user-form,
.aura-guest-user-link-card-otp-form,
.spc-aura-unlink-card-wrapper {
  @include breakpoint($only-mobile) {
    .aura-modal-form {
      height: calc(100vh - 3.5rem);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      background: $aura-form-otp-background !important;
    }

    .aura-modal-form-items,
    .aura-modal-form-actions {
      border-top: none;
      background: $aura-form-modal-section-bg;
    }

    .aura-form-messages-container:not(:empty) {
      padding: 0;
    }
  }
}

.spc-aura-cart-rewards-block,
.block-aura-rewards-header,
#aura-mobile-header-shop {
  .spc-aura-unlink-card-wrapper {
    .description,
    .no-link-message {
      b,
      a {
        color: $aura-spc-cart-unlinked-highlight;
      }

      a {
        text-decoration: underline;
        padding-#{$left}: rem(8);
        padding-#{$right}: 0;
        cursor: pointer;
      }
    }

    .description {
      font-family: $aura-regular;
      margin-bottom: rem(20);
      color: $aura-spc-cart-unlinked-desc;

      b {
        font-family: $aura-bold;
        display: block;
      }
    }

    .no-link-message {
      margin-top: rem(20);

      a {
        font-family: $aura-regular;
        line-height: rem(26);
        color: $aura-loyalty-dark-text;
        padding-#{$left}: rem(22);
        vertical-align: unset;
        cursor: pointer;
      }
    }
  }
}

// Join Aura Modal Positioning Fix For Mobile Devices.

@include breakpoint($only-mobile) {
  body.aura-enabled {
    .block-alshaya-main-menu.aura-header-modal-open {
      ul.menu__list.menu--one__list {
        width: 100vw;
        top: 0;
        overflow: auto;
        transform: unset;

        #aura-mobile-header-shop {
          .popup-overlay.aura-modal-form {
            &.otp-modal-overlay {
              top: 0 !important;
            }
          }
        }
      }
    }
  }
}
