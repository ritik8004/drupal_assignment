.cko-progress-tracker {
  display: inline-block;
  width: 100%;
  min-height: rem(60);
  margin: rem(32) auto;

  #checkout-progress {
    position: relative;
    width: rem(295);
    margin: auto;

    &::before {
      @extend %steps-border;

      background-color: $cko-steps-inactive-border;
    }

    &::after {
      @extend %steps-border;

      background-color: $cko-steps-active-border;
      transform: scaleX(0);
      transform-origin: $left;
    }

    &.step {
      &-2 {
        &::after {
          transform: scaleX(0.333);
        }
      }

      &-3 {
        &::after {
          transform: scaleX(0.666);
        }

        .step.step-2 {
          .logged-in & {
            pointer-events: none;
          }
        }
      }

      &-4 {
        &::after {
          transform: scaleX(1);
        }

        .step {
          pointer-events: none;
        }
      }
    }

    .progress-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;

      .step {
        z-index: 2;
        position: relative;

        .step-label {
          position: absolute;
          top: calc(100% + #{rem(7)});
          left: 50%;
          transform: translateX(-50%);
          min-width: rem(75);
          white-space: initial;
          color: $cko-steps-label-txt;
          font-size: rem(10);
          text-align: center;
        }

        span {
          display: inline-block;
          width: rem(26);
          height: rem(26);
          line-height: rem(26);
          font-size: rem(14);
          text-align: center;
          color: $cko-steps-nth-txt;
        }

        &.completed {
          span {
            color: transparent;
          }

          @include icon(check, after) {
            font-size: rem(26);
            color: $cko-steps-active-txt;
          }

          &.step-4 {
            .step-label {
              font-family: $alshaya-bold;
            }
          }
        }

        &.current {
          pointer-events: none;

          span {
            color: $cko-steps-active-txt;
          }

          span,
          .step-label {
            font-family: $alshaya-bold;
          }
        }

        &.completed,
        &.current {
          &::after {
            border: 0;
            background-color: $cko-steps-active-bg;
          }
        }

        &::after {
          content: "";
          position: absolute;
          z-index: -1;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: rem(26);
          height: rem(26);
          background-color: $cko-steps-inactive-bg;
          border-radius: 50%;
          border: rem(1) solid $cko-steps-active-bg;
        }
      }
    }
  }

  @include breakpoint($tablet) {
    margin-top: rem(36);
    margin-bottom: rem(36);

    #checkout-progress {
      width: rem(780);
      max-width: 80%;

      .progress-bar {
        .step {
          .step-label {
            white-space: nowrap;
            font-size: rem(14);
            top: calc(100% + #{rem(9)});
          }

          span {
            width: rem(32);
            height: rem(32);
            line-height: rem(32);
          }

          &.completed {
            &::after {
              font-size: rem(32);
            }
          }

          &::after {
            width: rem(32);
            height: rem(32);
          }
        }
      }
    }
  }
}
