<?php

/**
 * @file
 * Contains alshaya_aura_react.module.
 */

/**
 * Implements hook_page_attachments_alter().
 */
function alshaya_aura_react_page_attachments_alter(array &$page) {
  $current_route = \Drupal::routeMatch()->getRouteName();
  // Attach aura library on cart/checkout page.
  if (in_array($current_route, ['acq_cart.cart', 'alshaya_spc.checkout'])) {
    $page['#attached']['library'][] = 'alshaya_white_label/aura-loyalty';
  }
  elseif ($current_route === 'entity.user.canonical') {
    $page['#attached']['library'][] = 'alshaya_aura_react/alshaya_aura_my_accounts';
  }
}

/**
 * Implements hook_theme().
 */
function alshaya_aura_react_theme() {
  $theme = [
    'my_loyalty_club' => [
      'variables' => [],
    ],
  ];

  return $theme;
}

/**
 * Implements hook_alshaya_my_account_links_alter().
 */
function alshaya_aura_react_alshaya_my_account_links_alter(array &$links) {
  // Add My Loyalty Club link.
  $links['alshaya_loyalty_club'] = [
    'text' => t('My Loyalty Club'),
    'route' => 'alshaya_aura_react.my_loyalty_club',
    'weight' => 11,
  ];
}
