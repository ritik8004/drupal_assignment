<?php

/**
 * @file
 * Module file.
 */

 /**
 * Implements hook_alshaya_search_algolia_object_alter().
 */
function alshaya_pdp_pretty_path_alshaya_search_algolia_object_alter(array &$object) {
  /** @var \Drupal\alshaya_acm_product\SkuManager $skuManager */
  $skuManager = \Drupal::service('alshaya_acm_product.skumanager');
  $swatch_attribute = $skuManager->getPdpSwatchAttributes();

  if (!empty($swatch_attribute)) {
    /** @var \Drupal\alshaya_pdp_pretty_path\Service\AlshayaPdpPrettyPathHelper $pdpPrettyPathHelper */
    $pdpPrettyPathHelper = \Drupal::service('alshaya_pdp_pretty_path.helper');
    $swatch_urls = $pdpPrettyPathHelper->prepareSwatchUrls($object, $swatch_attribute);
    if (!empty($swatch_urls)) {
      $object['swatch_urls'] = $swatch_urls;
    }
  }
}
