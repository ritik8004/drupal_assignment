<?php

/**
 * @file
 * Alshaya email signup module file.
 */

use Drupal\Core\Form\FormStateInterface;

/**
 * Implements hook_form_BASE_FORM_ID_alter().
 */
function alshaya_email_signup_form_webform_submission_alshaya_email_signup_add_form_alter(&$form, FormStateInterface $form_state, $form_id) {
  // Add terms and conditions suffix.
  $form['elements']['first_name']['#prefix'] = '<div class="form__form-fields"><div class="input__container--half__wrapper">';
  $form['elements']['last_name']['#suffix'] = '</div>';
  $form['elements']['exclusive_deals']['#suffix'] = \Drupal::config('alshaya_user.settings')->get('terms_conditions.value') . '</div>';
}

/**
 * Implements hook_form_Email_Signup_preprocess_element().
 */
function alshaya_email_signup_preprocess_form_element(&$form) {
  // This should only run on frontend webform.
  if (isset($form['element']['#webform']) && $form['element']['#webform'] == 'alshaya_email_signup') {
    if ($form['name'] == 'first_name') {
      $form['attributes']['class'][] = 'input__container input__container--half';
    }
    elseif ($form['name'] == 'last_name') {
      $form['attributes']['class'][] = 'input__container input__container--half';
    }
  }
}
