services:
  alshaya_rcs_super_category.super_categories_helper:
    class: Drupal\alshaya_rcs_super_category\Service\RcsSuperCategoryHelper
    arguments:
     - '@config.factory'
     - '@entity_type.manager'
     - '@language_manager'
     - '@logger.factory'
     - '@alshaya_api.api'
     - '@file_system'
  alshaya_rcs_super_category.super_category_feature_manager:
    class: Drupal\alshaya_rcs_super_category\Service\AlshayaRcsSuperCategoryManager
    decorates: alshaya_super_category.super_category_feature_manager
    decoration_priority: 1
    arguments:
      - '@alshaya_acm_product_category.product_category_tree'
      - '@config.factory'
      - '@entity_type.manager'
      - '@module_handler'
      - '@alshaya_config.manager'
      - '@path.current'
  alshaya_rcs_super_category.product_category_tree:
    class: Drupal\alshaya_rcs_super_category\Service\RcsProductCategoryTree
    decorates: alshaya_acm_product_category.product_category_tree
    decoration_priority: 8
    arguments:
      - '@alshaya_rcs_super_category.product_category_tree.inner'
      - '@request_stack'
      - '@path.current'
      - '@entity_type.manager'
      - '@entity.repository'
      - '@language_manager'
      - '@cache.product_category_tree'
      - '@current_route_match'
      - '@database'
      - '@config.factory'
      - '@path_alias.manager'
      - '@alshaya_acm_product.category_helper'
      - '@module_handler'
      - '@theme.manager'

  alshaya_rcs_super_category.path_processor:
    class: Drupal\alshaya_rcs_super_category\Service\AlshayaRcsSuperCategoryPathProcessor
    decorates: rcs_placeholders.path_processor
    public: false
    tags:
      # PathProcessorAlias has priority 100. So if we do processing more late,
      # then the alias will not be available to us. Also priority of
      # LanguageNegotiationUrl processor is 300, which removes the langcode from
      # the url. So we need to keep priority between 100 and 300.
      - { name: 'path_processor_inbound', priority: 101 }
    arguments:
      - '@entity_type.manager'
      - '@language_manager'
      - '@module_handler'
      - '@config.factory'
      - '@alshaya_rcs_listing.department_pages_helper'
