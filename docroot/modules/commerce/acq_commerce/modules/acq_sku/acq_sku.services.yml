services:
  plugin.manager.sku:
    class: \Drupal\acq_sku\AcquiaCommerce\SKUPluginManager
    parent: default_plugin_manager

  acq_sku.category_manager:
    class: Drupal\acq_sku\ConductorCategoryManager
    arguments:
      - '@entity_type.manager'
      - '@acq_commerce.client_factory'
      - '@acq_commerce.api'
      - '@entity.query'
      - '@logger.factory'
      - '@acq_commerce.i18n_helper'

  acq_sku.product_options_manager:
    class: Drupal\acq_sku\ProductOptionsManager
    arguments:
      - '@entity_type.manager'
      - '@acq_commerce.api'
      - '@logger.factory'
      - '@acq_commerce.i18n_helper'

  acq_sku.category_repo:
    class: Drupal\acq_sku\ConductorCategoryRepository
    arguments:
      - '@entity_type.manager'
      - '@logger.factory'
      - 'acq_product_category'

  acq_sku.form_builder:
    class: Drupal\acq_sku\Form\AcqSkuFormBuilder
    arguments:
      - '@form_validator'
      - '@form_submitter'
      - '@form_cache'
      - '@module_handler'
      - '@event_dispatcher'
      - '@request_stack'
      - '@class_resolver'
      - '@element_info'
      - '@theme.manager'
      - '@csrf_token'

  acq_sku.linked_sku:
      class: Drupal\acq_sku\AcqSkuLinkedSku
      arguments:
        - '@acq_commerce.api'
        - '@cache.linked_skus'
        - '@config.factory'
        - '@language_manager'
        - '@logger.factory'

  cache.stock:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - { name: cache.bin, default_backend: cache.backend.permanent_database }
    factory: cache_factory:get
    arguments: [stock]

  cache.linked_skus:
    class: Drupal\Core\Cache\CacheInterface
    tags:
      - { name: cache.bin }
    factory: cache_factory:get
    arguments: [linked_skus]
