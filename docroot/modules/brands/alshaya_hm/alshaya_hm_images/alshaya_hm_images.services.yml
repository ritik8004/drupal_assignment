services:
  cache.pims_files:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - { name: cache.bin, default_backend: cache.backend.permanent_database }
    factory: cache_factory:get
    arguments: [pims_files]
  alshaya_hm_images.skuassetsmanager:
    class: Drupal\alshaya_hm_images\SkuAssetManager
    arguments:
      - '@config.factory'
      - '@current_route_match'
      - '@alshaya_acm_product.skumanager'
      - '@plugin.manager.sku'
      - '@entity_type.manager'
      - '@module_handler'
      - '@alshaya_acm_product.cache_manager'
      - '@cache.pims_files'
      - '@http_client'
      - '@logger.factory'
      - '@datetime.time'
      - '@file.usage'
      - '@lock.persistent'
      - '@cache.media_file_mapping'
  alshaya_hm_images.route_subscriber:
    class: Drupal\alshaya_hm_images\Routing\RouteSubscriber
    tags:
      - { name: event_subscriber }
  alshaya_hm_images.product_info_requested_event:
    class: Drupal\alshaya_hm_images\EventSubscriber\ProductInfoRequestedEventSubscriber
    arguments:
      - '@alshaya_hm_images.skuassetsmanager'
    tags:
      - { name: 'event_subscriber' }
  alshaya_hm_images.product_updated_event:
    class: Drupal\alshaya_hm_images\EventSubscriber\ProductUpdatedEventSubscriber
    arguments:
      - '@entity_type.manager'
      - '@logger.factory'
      - '@file.usage'
      - '@alshaya_hm_images.skuassetsmanager'
    tags:
      - { name: 'event_subscriber' }
  alshaya_hm_images.alshaya_hm_process_blacklisted_products:
    class: Drupal\alshaya_hm_images\EventSubscriber\AlshayaHMProcessBlacklistedProductsSubscriber
    arguments:
      - '@alshaya_hm_images.skuassetsmanager'
      - '@database'
      - '@logger.factory'
    tags:
      - { name: 'event_subscriber' }
