diff --git a/datalayer.libraries.yml b/datalayer.libraries.yml
index fb29f2a..7429e11 100644
--- a/datalayer.libraries.yml
+++ b/datalayer.libraries.yml
@@ -20,3 +20,4 @@ datapush:
     - core/jquery
     - core/drupalSettings
     - core/drupal
+    - alshaya_master/common_functions
diff --git a/js/datapush.js b/js/datapush.js
index 653749f..291609c 100755
--- a/js/datapush.js
+++ b/js/datapush.js
@@ -8,14 +8,29 @@
   Drupal.behaviors.dataPush = {
     attach: function () {
       $('body').once('datapush').each(function () {
-        var dataLayerContent = drupalSettings.dataLayerContent;
-        var event = new CustomEvent('dataLayerContentAlter', {
-          detail: {
-            data: () => dataLayerContent
+        try {
+          var dataLayerContent = drupalSettings.dataLayerContent;
+          if (Drupal.hasValue(dataLayerContent.event) && dataLayerContent.event == 'purchaseSuccess') {
+            Drupal.alshayaLogger('notice', 'Purchase success event before content alter: @datalayer.', {
+              '@datalayer': dataLayerContent,
+            });
           }
-        });
-        document.dispatchEvent(event);
-        window.dataLayer.push(dataLayerContent);
+          var event = new CustomEvent('dataLayerContentAlter', {
+            detail: {
+              data: () => dataLayerContent
+            }
+          });
+          if (Drupal.hasValue(dataLayerContent.event) && dataLayerContent.event == 'purchaseSuccess') {
+            Drupal.alshayaLogger('notice', 'Purchase success event after content alter: @datalayer.', {
+              '@datalayer': dataLayerContent,
+            });
+          }
+          document.dispatchEvent(event);
+          window.dataLayer.push(dataLayerContent);
+        }
+        catch (e) {
+          Drupal.logJavascriptError('Error while pushing to datalayer.', e);
+        }
       });
     }
   }
